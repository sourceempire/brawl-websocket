(function(G,$){typeof exports=="object"&&typeof module<"u"?$(exports,require("react")):typeof define=="function"&&define.amd?define(["exports","react"],$):(G=typeof globalThis<"u"?globalThis:G||self,$(G.BrawlWebsocket={},G.React))})(this,function(G,$){"use strict";var Aa=Object.defineProperty;var La=(G,$,v)=>$ in G?Aa(G,$,{enumerable:!0,configurable:!0,writable:!0,value:v}):G[$]=v;var L=(G,$,v)=>(La(G,typeof $!="symbol"?$+"":$,v),v);var v=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function jr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ht={exports:{}},Ke={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kr;function Fo(){if(kr)return Ke;kr=1;var e=$,t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,o=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function u(c,f,w){var l,s={},y=null,x=null;w!==void 0&&(y=""+w),f.key!==void 0&&(y=""+f.key),f.ref!==void 0&&(x=f.ref);for(l in f)n.call(f,l)&&!a.hasOwnProperty(l)&&(s[l]=f[l]);if(c&&c.defaultProps)for(l in f=c.defaultProps,f)s[l]===void 0&&(s[l]=f[l]);return{$$typeof:t,type:c,key:y,ref:x,props:s,_owner:o.current}}return Ke.Fragment=r,Ke.jsx=u,Ke.jsxs=u,Ke}var Qe={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fr;function No(){return Fr||(Fr=1,process.env.NODE_ENV!=="production"&&function(){var e=$,t=Symbol.for("react.element"),r=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),l=Symbol.for("react.suspense_list"),s=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),x=Symbol.for("react.offscreen"),_=Symbol.iterator,q="@@iterator";function M(i){if(i===null||typeof i!="object")return null;var h=_&&i[_]||i[q];return typeof h=="function"?h:null}var F=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function A(i){{for(var h=arguments.length,g=new Array(h>1?h-1:0),S=1;S<h;S++)g[S-1]=arguments[S];te("error",i,g)}}function te(i,h,g){{var S=F.ReactDebugCurrentFrame,N=S.getStackAddendum();N!==""&&(h+="%s",g=g.concat([N]));var I=g.map(function(T){return String(T)});I.unshift("Warning: "+h),Function.prototype.apply.call(console[i],console,I)}}var re=!1,fe=!1,yt=!1,Ne=!1,Ve=!1,Me;Me=Symbol.for("react.module.reference");function Cr(i){return!!(typeof i=="string"||typeof i=="function"||i===n||i===a||Ve||i===o||i===w||i===l||Ne||i===x||re||fe||yt||typeof i=="object"&&i!==null&&(i.$$typeof===y||i.$$typeof===s||i.$$typeof===u||i.$$typeof===c||i.$$typeof===f||i.$$typeof===Me||i.getModuleId!==void 0))}function Ge(i,h,g){var S=i.displayName;if(S)return S;var N=h.displayName||h.name||"";return N!==""?g+"("+N+")":g}function At(i){return i.displayName||"Context"}function Q(i){if(i==null)return null;if(typeof i.tag=="number"&&A("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case n:return"Fragment";case r:return"Portal";case a:return"Profiler";case o:return"StrictMode";case w:return"Suspense";case l:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case c:var h=i;return At(h)+".Consumer";case u:var g=i;return At(g._context)+".Provider";case f:return Ge(i,i.render,"ForwardRef");case s:var S=i.displayName||null;return S!==null?S:Q(i.type)||"Memo";case y:{var N=i,I=N._payload,T=N._init;try{return Q(T(I))}catch{return null}}}return null}var Re=Object.assign,we=0,Lt,Dt,Ut,b,d,m,E;function p(){}p.__reactDisabledLog=!0;function P(){{if(we===0){Lt=console.log,Dt=console.info,Ut=console.warn,b=console.error,d=console.group,m=console.groupCollapsed,E=console.groupEnd;var i={configurable:!0,enumerable:!0,value:p,writable:!0};Object.defineProperties(console,{info:i,log:i,warn:i,error:i,group:i,groupCollapsed:i,groupEnd:i})}we++}}function O(){{if(we--,we===0){var i={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:Re({},i,{value:Lt}),info:Re({},i,{value:Dt}),warn:Re({},i,{value:Ut}),error:Re({},i,{value:b}),group:Re({},i,{value:d}),groupCollapsed:Re({},i,{value:m}),groupEnd:Re({},i,{value:E})})}we<0&&A("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var B=F.ReactCurrentDispatcher,J;function W(i,h,g){{if(J===void 0)try{throw Error()}catch(N){var S=N.stack.trim().match(/\n( *(at )?)/);J=S&&S[1]||""}return`
`+J+i}}var C=!1,ne;{var Te=typeof WeakMap=="function"?WeakMap:Map;ne=new Te}function z(i,h){if(!i||C)return"";{var g=ne.get(i);if(g!==void 0)return g}var S;C=!0;var N=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var I;I=B.current,B.current=null,P();try{if(h){var T=function(){throw Error()};if(Object.defineProperty(T.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(T,[])}catch(je){S=je}Reflect.construct(i,[],T)}else{try{T.call()}catch(je){S=je}i.call(T.prototype)}}else{try{throw Error()}catch(je){S=je}i()}}catch(je){if(je&&S&&typeof je.stack=="string"){for(var R=je.stack.split(`
`),K=S.stack.split(`
`),H=R.length-1,X=K.length-1;H>=1&&X>=0&&R[H]!==K[X];)X--;for(;H>=1&&X>=0;H--,X--)if(R[H]!==K[X]){if(H!==1||X!==1)do if(H--,X--,X<0||R[H]!==K[X]){var ue=`
`+R[H].replace(" at new "," at ");return i.displayName&&ue.includes("<anonymous>")&&(ue=ue.replace("<anonymous>",i.displayName)),typeof i=="function"&&ne.set(i,ue),ue}while(H>=1&&X>=0);break}}}finally{C=!1,B.current=I,O(),Error.prepareStackTrace=N}var ze=i?i.displayName||i.name:"",ko=ze?W(ze):"";return typeof i=="function"&&ne.set(i,ko),ko}function ae(i,h,g){return z(i,!1)}function _e(i){var h=i.prototype;return!!(h&&h.isReactComponent)}function Z(i,h,g){if(i==null)return"";if(typeof i=="function")return z(i,_e(i));if(typeof i=="string")return W(i);switch(i){case w:return W("Suspense");case l:return W("SuspenseList")}if(typeof i=="object")switch(i.$$typeof){case f:return ae(i.render);case s:return Z(i.type,h,g);case y:{var S=i,N=S._payload,I=S._init;try{return Z(I(N),h,g)}catch{}}}return""}var he=Object.prototype.hasOwnProperty,We={},Mt=F.ReactDebugCurrentFrame;function Wt(i){if(i){var h=i._owner,g=Z(i.type,i._source,h?h.type:null);Mt.setExtraStackFrame(g)}else Mt.setExtraStackFrame(null)}function ma(i,h,g,S,N){{var I=Function.call.bind(he);for(var T in i)if(I(i,T)){var R=void 0;try{if(typeof i[T]!="function"){var K=Error((S||"React class")+": "+g+" type `"+T+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof i[T]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw K.name="Invariant Violation",K}R=i[T](h,T,S,g,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(H){R=H}R&&!(R instanceof Error)&&(Wt(N),A("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",S||"React class",g,T,typeof R),Wt(null)),R instanceof Error&&!(R.message in We)&&(We[R.message]=!0,Wt(N),A("Failed %s type: %s",g,R.message),Wt(null))}}}var ba=Array.isArray;function Sr(i){return ba(i)}function ga(i){{var h=typeof Symbol=="function"&&Symbol.toStringTag,g=h&&i[Symbol.toStringTag]||i.constructor.name||"Object";return g}}function ya(i){try{return Eo(i),!1}catch{return!0}}function Eo(i){return""+i}function wo(i){if(ya(i))return A("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",ga(i)),Eo(i)}var Et=F.ReactCurrentOwner,Ea={key:!0,ref:!0,__self:!0,__source:!0},_o,Co,xr;xr={};function wa(i){if(he.call(i,"ref")){var h=Object.getOwnPropertyDescriptor(i,"ref").get;if(h&&h.isReactWarning)return!1}return i.ref!==void 0}function _a(i){if(he.call(i,"key")){var h=Object.getOwnPropertyDescriptor(i,"key").get;if(h&&h.isReactWarning)return!1}return i.key!==void 0}function Ca(i,h){if(typeof i.ref=="string"&&Et.current&&h&&Et.current.stateNode!==h){var g=Q(Et.current.type);xr[g]||(A('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',Q(Et.current.type),i.ref),xr[g]=!0)}}function Sa(i,h){{var g=function(){_o||(_o=!0,A("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",h))};g.isReactWarning=!0,Object.defineProperty(i,"key",{get:g,configurable:!0})}}function xa(i,h){{var g=function(){Co||(Co=!0,A("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",h))};g.isReactWarning=!0,Object.defineProperty(i,"ref",{get:g,configurable:!0})}}var Oa=function(i,h,g,S,N,I,T){var R={$$typeof:t,type:i,key:h,ref:g,props:T,_owner:I};return R._store={},Object.defineProperty(R._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(R,"_self",{configurable:!1,enumerable:!1,writable:!1,value:S}),Object.defineProperty(R,"_source",{configurable:!1,enumerable:!1,writable:!1,value:N}),Object.freeze&&(Object.freeze(R.props),Object.freeze(R)),R};function Ra(i,h,g,S,N){{var I,T={},R=null,K=null;g!==void 0&&(wo(g),R=""+g),_a(h)&&(wo(h.key),R=""+h.key),wa(h)&&(K=h.ref,Ca(h,N));for(I in h)he.call(h,I)&&!Ea.hasOwnProperty(I)&&(T[I]=h[I]);if(i&&i.defaultProps){var H=i.defaultProps;for(I in H)T[I]===void 0&&(T[I]=H[I])}if(R||K){var X=typeof i=="function"?i.displayName||i.name||"Unknown":i;R&&Sa(T,X),K&&xa(T,X)}return Oa(i,R,K,N,S,Et.current,T)}}var Or=F.ReactCurrentOwner,So=F.ReactDebugCurrentFrame;function Ye(i){if(i){var h=i._owner,g=Z(i.type,i._source,h?h.type:null);So.setExtraStackFrame(g)}else So.setExtraStackFrame(null)}var Rr;Rr=!1;function Tr(i){return typeof i=="object"&&i!==null&&i.$$typeof===t}function xo(){{if(Or.current){var i=Q(Or.current.type);if(i)return`

Check the render method of \``+i+"`."}return""}}function Ta(i){{if(i!==void 0){var h=i.fileName.replace(/^.*[\\\/]/,""),g=i.lineNumber;return`

Check your code at `+h+":"+g+"."}return""}}var Oo={};function ja(i){{var h=xo();if(!h){var g=typeof i=="string"?i:i.displayName||i.name;g&&(h=`

Check the top-level render call using <`+g+">.")}return h}}function Ro(i,h){{if(!i._store||i._store.validated||i.key!=null)return;i._store.validated=!0;var g=ja(h);if(Oo[g])return;Oo[g]=!0;var S="";i&&i._owner&&i._owner!==Or.current&&(S=" It was passed a child from "+Q(i._owner.type)+"."),Ye(i),A('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',g,S),Ye(null)}}function To(i,h){{if(typeof i!="object")return;if(Sr(i))for(var g=0;g<i.length;g++){var S=i[g];Tr(S)&&Ro(S,h)}else if(Tr(i))i._store&&(i._store.validated=!0);else if(i){var N=M(i);if(typeof N=="function"&&N!==i.entries)for(var I=N.call(i),T;!(T=I.next()).done;)Tr(T.value)&&Ro(T.value,h)}}}function ka(i){{var h=i.type;if(h==null||typeof h=="string")return;var g;if(typeof h=="function")g=h.propTypes;else if(typeof h=="object"&&(h.$$typeof===f||h.$$typeof===s))g=h.propTypes;else return;if(g){var S=Q(h);ma(g,i.props,"prop",S,i)}else if(h.PropTypes!==void 0&&!Rr){Rr=!0;var N=Q(h);A("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",N||"Unknown")}typeof h.getDefaultProps=="function"&&!h.getDefaultProps.isReactClassApproved&&A("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function Fa(i){{for(var h=Object.keys(i.props),g=0;g<h.length;g++){var S=h[g];if(S!=="children"&&S!=="key"){Ye(i),A("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",S),Ye(null);break}}i.ref!==null&&(Ye(i),A("Invalid attribute `ref` supplied to `React.Fragment`."),Ye(null))}}function jo(i,h,g,S,N,I){{var T=Cr(i);if(!T){var R="";(i===void 0||typeof i=="object"&&i!==null&&Object.keys(i).length===0)&&(R+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var K=Ta(N);K?R+=K:R+=xo();var H;i===null?H="null":Sr(i)?H="array":i!==void 0&&i.$$typeof===t?(H="<"+(Q(i.type)||"Unknown")+" />",R=" Did you accidentally export a JSX literal instead of a component?"):H=typeof i,A("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",H,R)}var X=Ra(i,h,g,N,I);if(X==null)return X;if(T){var ue=h.children;if(ue!==void 0)if(S)if(Sr(ue)){for(var ze=0;ze<ue.length;ze++)To(ue[ze],i);Object.freeze&&Object.freeze(ue)}else A("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else To(ue,i)}return i===n?Fa(X):ka(X),X}}function Na(i,h,g){return jo(i,h,g,!0)}function Pa(i,h,g){return jo(i,h,g,!1)}var $a=Pa,Ia=Na;Qe.Fragment=n,Qe.jsx=$a,Qe.jsxs=Ia}()),Qe}process.env.NODE_ENV==="production"?Ht.exports=Fo():Ht.exports=No();var Ze=Ht.exports,Nr={exports:{}};(function(e,t){(function(r,n){e.exports=n($)})(self,r=>(()=>{var n={156:c=>{c.exports=r}},o={};function a(c){var f=o[c];if(f!==void 0)return f.exports;var w=o[c]={exports:{}};return n[c](w,w.exports,a),w.exports}a.d=(c,f)=>{for(var w in f)a.o(f,w)&&!a.o(c,w)&&Object.defineProperty(c,w,{enumerable:!0,get:f[w]})},a.o=(c,f)=>Object.prototype.hasOwnProperty.call(c,f),a.r=c=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})};var u={};return(()=>{a.r(u),a.d(u,{Actions:()=>x,default:()=>Ut,isAbortError:()=>M,isErrorResponse:()=>q,useDelete:()=>yt,useFetch:()=>re,useFetchImmediate:()=>Ve,useGet:()=>Cr,useGetImmediate:()=>At,usePost:()=>Re,usePut:()=>Lt,useUpload:()=>Dt});var c=function(){return c=Object.assign||function(b){for(var d,m=1,E=arguments.length;m<E;m++)for(var p in d=arguments[m])Object.prototype.hasOwnProperty.call(d,p)&&(b[p]=d[p]);return b},c.apply(this,arguments)},f=function(b,d,m,E){return new(m||(m=Promise))(function(p,P){function O(W){try{J(E.next(W))}catch(C){P(C)}}function B(W){try{J(E.throw(W))}catch(C){P(C)}}function J(W){var C;W.done?p(W.value):(C=W.value,C instanceof m?C:new m(function(ne){ne(C)})).then(O,B)}J((E=E.apply(b,d||[])).next())})},w=function(b,d){var m,E,p,P,O={label:0,sent:function(){if(1&p[0])throw p[1];return p[1]},trys:[],ops:[]};return P={next:B(0),throw:B(1),return:B(2)},typeof Symbol=="function"&&(P[Symbol.iterator]=function(){return this}),P;function B(J){return function(W){return function(C){if(m)throw new TypeError("Generator is already executing.");for(;P&&(P=0,C[0]&&(O=0)),O;)try{if(m=1,E&&(p=2&C[0]?E.return:C[0]?E.throw||((p=E.return)&&p.call(E),0):E.next)&&!(p=p.call(E,C[1])).done)return p;switch(E=0,p&&(C=[2&C[0],p.value]),C[0]){case 0:case 1:p=C;break;case 4:return O.label++,{value:C[1],done:!1};case 5:O.label++,E=C[1],C=[0];continue;case 7:C=O.ops.pop(),O.trys.pop();continue;default:if(!((p=(p=O.trys).length>0&&p[p.length-1])||C[0]!==6&&C[0]!==2)){O=0;continue}if(C[0]===3&&(!p||C[1]>p[0]&&C[1]<p[3])){O.label=C[1];break}if(C[0]===6&&O.label<p[1]){O.label=p[1],p=C;break}if(p&&O.label<p[2]){O.label=p[2],O.ops.push(C);break}p[2]&&O.ops.pop(),O.trys.pop();continue}C=d.call(b,O)}catch(ne){C=[6,ne],E=0}finally{m=p=0}if(5&C[0])throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}([J,W])}}};function l(b){var d={},m=localStorage.getItem("XSRF-TOKEN");return m&&(d["X-XSRF-TOKEN"]=m),b||(d["Content-Type"]="application/json"),d}function s(b){return f(this,void 0,void 0,function(){var d,m;return w(this,function(E){switch(E.label){case 0:return(d=b.headers.get("X-XSRF-TOKEN"))&&localStorage.setItem("XSRF-TOKEN",d),[4,b.json()];case 1:if(m=E.sent(),b.ok)return[2,m];throw c({status:b.status},m)}})})}function y(b,d){return d===void 0&&(d={}),f(this,void 0,void 0,function(){var m,E,p,P,O,B,J,W,C,ne,Te;return w(this,function(z){switch(z.label){case 0:return m=d.method,E=m===void 0?"GET":m,p=d.headers,P=p===void 0?{}:p,O=d.params,B=O===void 0?{}:O,J=d.body,W=d.signal,C=function(ae){return new URLSearchParams(Object.entries(ae).filter(function(_e){return _e[1]!=null}).reduce(function(_e,Z){var he,We=Z[0],Mt=Z[1];return c(c({},_e),((he={})[We]=Mt.toString(),he))},{}))}(B||{}),ne="".concat(b,"?").concat(C),Te=J instanceof FormData,[4,fetch(ne,c({method:E,signal:W,credentials:"include",headers:c(c({},l(Te)),P)},J&&{body:Te?J:JSON.stringify(J)}))];case 1:return[4,s(z.sent())];case 2:return[2,z.sent()]}})})}var x,_=a(156);function q(b){return b.errorCode!==void 0&&b.message!==void 0}function M(b){return b.name==="AbortError"}(function(b){b[b.FETCH_INIT=0]="FETCH_INIT",b[b.FETCH_SUCCESS=1]="FETCH_SUCCESS",b[b.FETCH_FAILURE=2]="FETCH_FAILURE",b[b.CLEAR_ERROR=3]="CLEAR_ERROR"})(x||(x={}));var F=function(){return F=Object.assign||function(b){for(var d,m=1,E=arguments.length;m<E;m++)for(var p in d=arguments[m])Object.prototype.hasOwnProperty.call(d,p)&&(b[p]=d[p]);return b},F.apply(this,arguments)},A={loading:!1,success:!1,error:null,data:null};function te(b,d){switch(d.type){case x.FETCH_INIT:return F(F({},b),{loading:!0,error:null,success:!1});case x.FETCH_SUCCESS:return F(F({},b),{loading:!1,error:null,data:d.payload,success:!0});case x.FETCH_FAILURE:return F(F({},b),{loading:!1,error:d.payload,success:!1});case x.CLEAR_ERROR:return F(F({},b),{error:null});default:throw new Error}}function re(b,d){d===void 0&&(d={});var m=(0,_.useReducer)(te,A),E=m[0],p=m[1],P=(0,_.useRef)(b),O=(0,_.useRef)(d);(0,_.useEffect)(function(){P.current=b,O.current=d},[b,d]);var B=(0,_.useCallback)(function(W){W===void 0&&(W={});var C=new AbortController,ne=F(F({},W),{signal:C.signal});return p({type:x.FETCH_INIT}),y(P.current,ne).then(function(Te){return function(z,ae,_e){var Z=ae.onComplete;_e({type:x.FETCH_SUCCESS,payload:z}),Z==null||Z(z)}(Te,O.current,p)}).catch(function(Te){return function(z,ae,_e){var Z,he;if(!M(z))if(q(z))_e({type:x.FETCH_FAILURE,payload:z}),(Z=ae==null?void 0:ae.onError)===null||Z===void 0||Z.call(ae,z);else{var We={errorCode:"UNCAUGHT_ERROR",message:"Uncaught error in useFetch"};_e({type:x.FETCH_FAILURE,payload:We}),(he=ae==null?void 0:ae.onError)===null||he===void 0||he.call(ae,We),console.warn("Unknown error:",z)}}(Te,O.current,p)}),C},[]),J=(0,_.useCallback)(function(){p({type:x.CLEAR_ERROR})},[]);return[B,F(F({},E),{clearError:J})]}var fe=function(){return fe=Object.assign||function(b){for(var d,m=1,E=arguments.length;m<E;m++)for(var p in d=arguments[m])Object.prototype.hasOwnProperty.call(d,p)&&(b[p]=d[p]);return b},fe.apply(this,arguments)};function yt(b,d){d===void 0&&(d={});var m=re(b,d),E=m[0],p=m[1];return[(0,_.useCallback)(function(P){return E(fe(fe({},P),{method:"DELETE"}))},[E]),p]}var Ne=function(){return Ne=Object.assign||function(b){for(var d,m=1,E=arguments.length;m<E;m++)for(var p in d=arguments[m])Object.prototype.hasOwnProperty.call(d,p)&&(b[p]=d[p]);return b},Ne.apply(this,arguments)};function Ve(b,d,m){d===void 0&&(d={}),m===void 0&&(m={});var E=(0,_.useRef)(d),p=re(b,m),P=p[0],O=p[1];return(0,_.useEffect)(function(){E.current=d},[d]),(0,_.useEffect)(function(){var B=P(E.current);return function(){B.abort()}},[P]),Ne({},O)}var Me=function(){return Me=Object.assign||function(b){for(var d,m=1,E=arguments.length;m<E;m++)for(var p in d=arguments[m])Object.prototype.hasOwnProperty.call(d,p)&&(b[p]=d[p]);return b},Me.apply(this,arguments)};function Cr(b,d){d===void 0&&(d={});var m=re(b,d),E=m[0],p=m[1];return[(0,_.useCallback)(function(P){return E(Me(Me({},P),{method:"GET"}))},[E]),p]}var Ge=function(){return Ge=Object.assign||function(b){for(var d,m=1,E=arguments.length;m<E;m++)for(var p in d=arguments[m])Object.prototype.hasOwnProperty.call(d,p)&&(b[p]=d[p]);return b},Ge.apply(this,arguments)};function At(b,d,m){return Ve(b,Ge(Ge({},d),{method:"GET"}),m)}var Q=function(){return Q=Object.assign||function(b){for(var d,m=1,E=arguments.length;m<E;m++)for(var p in d=arguments[m])Object.prototype.hasOwnProperty.call(d,p)&&(b[p]=d[p]);return b},Q.apply(this,arguments)};function Re(b,d){d===void 0&&(d={});var m=re(b,d),E=m[0],p=m[1];return[(0,_.useCallback)(function(P){return E(Q(Q({},P),{method:"POST"}))},[E]),p]}var we=function(){return we=Object.assign||function(b){for(var d,m=1,E=arguments.length;m<E;m++)for(var p in d=arguments[m])Object.prototype.hasOwnProperty.call(d,p)&&(b[p]=d[p]);return b},we.apply(this,arguments)};function Lt(b,d){d===void 0&&(d={});var m=re(b,d),E=m[0],p=m[1];return[(0,_.useCallback)(function(P){return E(we(we({},P),{method:"PUT"}))},[E]),p]}function Dt(b,d){d===void 0&&(d={});var m=re(b,d),E=m[0],p=m[1];return[(0,_.useCallback)(function(P,O){var B=new FormData;return B.append("blob",P),O!=null&&O.body&&B.append("body",JSON.stringify(O.body)),E({method:"POST",signal:O==null?void 0:O.signal,params:O==null?void 0:O.params,body:B})},[E]),p]}const Ut=y})(),u})())})(Nr);var Po=Nr.exports;const $o=jr(Po);var Pr={exports:{}},Bt={};v.crypto&&v.crypto.getRandomValues?Bt.randomBytes=function(e){var t=new Uint8Array(e);return v.crypto.getRandomValues(t),t}:Bt.randomBytes=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=Math.floor(Math.random()*256);return t};var Io=Bt,$r="abcdefghijklmnopqrstuvwxyz012345",He={string:function(e){for(var t=$r.length,r=Io.randomBytes(e),n=[],o=0;o<e;o++)n.push($r.substr(r[o]%t,1));return n.join("")},number:function(e){return Math.floor(Math.random()*e)},numberString:function(e){var t=(""+(e-1)).length,r=new Array(t+1).join("0");return(r+this.number(e)).slice(-t)}};(function(e){var t=He,r={},n=!1,o=v.chrome&&v.chrome.app&&v.chrome.app.runtime;e.exports={attachEvent:function(u,c){typeof v.addEventListener<"u"?v.addEventListener(u,c,!1):v.document&&v.attachEvent&&(v.document.attachEvent("on"+u,c),v.attachEvent("on"+u,c))},detachEvent:function(u,c){typeof v.addEventListener<"u"?v.removeEventListener(u,c,!1):v.document&&v.detachEvent&&(v.document.detachEvent("on"+u,c),v.detachEvent("on"+u,c))},unloadAdd:function(u){if(o)return null;var c=t.string(8);return r[c]=u,n&&setTimeout(this.triggerUnloadCallbacks,0),c},unloadDel:function(u){u in r&&delete r[u]},triggerUnloadCallbacks:function(){for(var u in r)r[u](),delete r[u]}};var a=function(){n||(n=!0,e.exports.triggerUnloadCallbacks())};o||e.exports.attachEvent("unload",a)})(Pr);var ke=Pr.exports,Ao=function(t,r){if(r=r.split(":")[0],t=+t,!t)return!1;switch(r){case"http":case"ws":return t!==80;case"https":case"wss":return t!==443;case"ftp":return t!==21;case"gopher":return t!==70;case"file":return!1}return t!==0},Xt={},Lo=Object.prototype.hasOwnProperty,Do;function Ir(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch{return null}}function Ar(e){try{return encodeURIComponent(e)}catch{return null}}function Uo(e){for(var t=/([^=?#&]+)=?([^&]*)/g,r={},n;n=t.exec(e);){var o=Ir(n[1]),a=Ir(n[2]);o===null||a===null||o in r||(r[o]=a)}return r}function Mo(e,t){t=t||"";var r=[],n,o;typeof t!="string"&&(t="?");for(o in e)if(Lo.call(e,o)){if(n=e[o],!n&&(n===null||n===Do||isNaN(n))&&(n=""),o=Ar(o),n=Ar(n),o===null||n===null)continue;r.push(o+"="+n)}return r.length?t+r.join("&"):""}Xt.stringify=Mo,Xt.parse=Uo;var Lr=Ao,wt=Xt,Wo=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,Dr=/[\n\r\t]/g,Ho=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,Ur=/:\d+$/,Bo=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,Xo=/^[a-zA-Z]:/;function qt(e){return(e||"").toString().replace(Wo,"")}var Jt=[["#","hash"],["?","query"],function(t,r){return de(r.protocol)?t.replace(/\\/g,"/"):t},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],Mr={hash:1,query:1};function Wr(e){var t;typeof window<"u"?t=window:typeof v<"u"?t=v:typeof self<"u"?t=self:t={};var r=t.location||{};e=e||r;var n={},o=typeof e,a;if(e.protocol==="blob:")n=new pe(unescape(e.pathname),{});else if(o==="string"){n=new pe(e,{});for(a in Mr)delete n[a]}else if(o==="object"){for(a in e)a in Mr||(n[a]=e[a]);n.slashes===void 0&&(n.slashes=Ho.test(e.href))}return n}function de(e){return e==="file:"||e==="ftp:"||e==="http:"||e==="https:"||e==="ws:"||e==="wss:"}function Hr(e,t){e=qt(e),e=e.replace(Dr,""),t=t||{};var r=Bo.exec(e),n=r[1]?r[1].toLowerCase():"",o=!!r[2],a=!!r[3],u=0,c;return o?a?(c=r[2]+r[3]+r[4],u=r[2].length+r[3].length):(c=r[2]+r[4],u=r[2].length):a?(c=r[3]+r[4],u=r[3].length):c=r[4],n==="file:"?u>=2&&(c=c.slice(2)):de(n)?c=r[4]:n?o&&(c=c.slice(2)):u>=2&&de(t.protocol)&&(c=r[4]),{protocol:n,slashes:o||de(n),slashesCount:u,rest:c}}function qo(e,t){if(e==="")return t;for(var r=(t||"/").split("/").slice(0,-1).concat(e.split("/")),n=r.length,o=r[n-1],a=!1,u=0;n--;)r[n]==="."?r.splice(n,1):r[n]===".."?(r.splice(n,1),u++):u&&(n===0&&(a=!0),r.splice(n,1),u--);return a&&r.unshift(""),(o==="."||o==="..")&&r.push(""),r.join("/")}function pe(e,t,r){if(e=qt(e),e=e.replace(Dr,""),!(this instanceof pe))return new pe(e,t,r);var n,o,a,u,c,f,w=Jt.slice(),l=typeof t,s=this,y=0;for(l!=="object"&&l!=="string"&&(r=t,t=null),r&&typeof r!="function"&&(r=wt.parse),t=Wr(t),o=Hr(e||"",t),n=!o.protocol&&!o.slashes,s.slashes=o.slashes||n&&t.slashes,s.protocol=o.protocol||t.protocol||"",e=o.rest,(o.protocol==="file:"&&(o.slashesCount!==2||Xo.test(e))||!o.slashes&&(o.protocol||o.slashesCount<2||!de(s.protocol)))&&(w[3]=[/(.*)/,"pathname"]);y<w.length;y++){if(u=w[y],typeof u=="function"){e=u(e,s);continue}a=u[0],f=u[1],a!==a?s[f]=e:typeof a=="string"?(c=a==="@"?e.lastIndexOf(a):e.indexOf(a),~c&&(typeof u[2]=="number"?(s[f]=e.slice(0,c),e=e.slice(c+u[2])):(s[f]=e.slice(c),e=e.slice(0,c)))):(c=a.exec(e))&&(s[f]=c[1],e=e.slice(0,c.index)),s[f]=s[f]||n&&u[3]&&t[f]||"",u[4]&&(s[f]=s[f].toLowerCase())}r&&(s.query=r(s.query)),n&&t.slashes&&s.pathname.charAt(0)!=="/"&&(s.pathname!==""||t.pathname!=="")&&(s.pathname=qo(s.pathname,t.pathname)),s.pathname.charAt(0)!=="/"&&de(s.protocol)&&(s.pathname="/"+s.pathname),Lr(s.port,s.protocol)||(s.host=s.hostname,s.port=""),s.username=s.password="",s.auth&&(c=s.auth.indexOf(":"),~c?(s.username=s.auth.slice(0,c),s.username=encodeURIComponent(decodeURIComponent(s.username)),s.password=s.auth.slice(c+1),s.password=encodeURIComponent(decodeURIComponent(s.password))):s.username=encodeURIComponent(decodeURIComponent(s.auth)),s.auth=s.password?s.username+":"+s.password:s.username),s.origin=s.protocol!=="file:"&&de(s.protocol)&&s.host?s.protocol+"//"+s.host:"null",s.href=s.toString()}function Jo(e,t,r){var n=this;switch(e){case"query":typeof t=="string"&&t.length&&(t=(r||wt.parse)(t)),n[e]=t;break;case"port":n[e]=t,Lr(t,n.protocol)?t&&(n.host=n.hostname+":"+t):(n.host=n.hostname,n[e]="");break;case"hostname":n[e]=t,n.port&&(t+=":"+n.port),n.host=t;break;case"host":n[e]=t,Ur.test(t)?(t=t.split(":"),n.port=t.pop(),n.hostname=t.join(":")):(n.hostname=t,n.port="");break;case"protocol":n.protocol=t.toLowerCase(),n.slashes=!r;break;case"pathname":case"hash":if(t){var o=e==="pathname"?"/":"#";n[e]=t.charAt(0)!==o?o+t:t}else n[e]=t;break;case"username":case"password":n[e]=encodeURIComponent(t);break;case"auth":var a=t.indexOf(":");~a?(n.username=t.slice(0,a),n.username=encodeURIComponent(decodeURIComponent(n.username)),n.password=t.slice(a+1),n.password=encodeURIComponent(decodeURIComponent(n.password))):n.username=encodeURIComponent(decodeURIComponent(t))}for(var u=0;u<Jt.length;u++){var c=Jt[u];c[4]&&(n[c[1]]=n[c[1]].toLowerCase())}return n.auth=n.password?n.username+":"+n.password:n.username,n.origin=n.protocol!=="file:"&&de(n.protocol)&&n.host?n.protocol+"//"+n.host:"null",n.href=n.toString(),n}function Vo(e){(!e||typeof e!="function")&&(e=wt.stringify);var t,r=this,n=r.host,o=r.protocol;o&&o.charAt(o.length-1)!==":"&&(o+=":");var a=o+(r.protocol&&r.slashes||de(r.protocol)?"//":"");return r.username?(a+=r.username,r.password&&(a+=":"+r.password),a+="@"):r.password?(a+=":"+r.password,a+="@"):r.protocol!=="file:"&&de(r.protocol)&&!n&&r.pathname!=="/"&&(a+="@"),(n[n.length-1]===":"||Ur.test(r.hostname)&&!r.port)&&(n+=":"),a+=n+r.pathname,t=typeof r.query=="object"?e(r.query):r.query,t&&(a+=t.charAt(0)!=="?"?"?"+t:t),r.hash&&(a+=r.hash),a}pe.prototype={set:Jo,toString:Vo},pe.extractProtocol=Hr,pe.location=Wr,pe.trimLeft=qt,pe.qs=wt;var Br=pe,_t={exports:{}},Vt,Xr;function Go(){if(Xr)return Vt;Xr=1;var e=1e3,t=e*60,r=t*60,n=r*24,o=n*7,a=n*365.25;Vt=function(l,s){s=s||{};var y=typeof l;if(y==="string"&&l.length>0)return u(l);if(y==="number"&&isFinite(l))return s.long?f(l):c(l);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(l))};function u(l){if(l=String(l),!(l.length>100)){var s=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(l);if(s){var y=parseFloat(s[1]),x=(s[2]||"ms").toLowerCase();switch(x){case"years":case"year":case"yrs":case"yr":case"y":return y*a;case"weeks":case"week":case"w":return y*o;case"days":case"day":case"d":return y*n;case"hours":case"hour":case"hrs":case"hr":case"h":return y*r;case"minutes":case"minute":case"mins":case"min":case"m":return y*t;case"seconds":case"second":case"secs":case"sec":case"s":return y*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return y;default:return}}}}function c(l){var s=Math.abs(l);return s>=n?Math.round(l/n)+"d":s>=r?Math.round(l/r)+"h":s>=t?Math.round(l/t)+"m":s>=e?Math.round(l/e)+"s":l+"ms"}function f(l){var s=Math.abs(l);return s>=n?w(l,s,n,"day"):s>=r?w(l,s,r,"hour"):s>=t?w(l,s,t,"minute"):s>=e?w(l,s,e,"second"):l+" ms"}function w(l,s,y,x){var _=s>=y*1.5;return Math.round(l/y)+" "+x+(_?"s":"")}return Vt}var Gt,qr;function Yo(){if(qr)return Gt;qr=1;function e(t){n.debug=n,n.default=n,n.coerce=w,n.disable=c,n.enable=u,n.enabled=f,n.humanize=Go(),Object.keys(t).forEach(function(l){n[l]=t[l]}),n.instances=[],n.names=[],n.skips=[],n.formatters={};function r(l){for(var s=0,y=0;y<l.length;y++)s=(s<<5)-s+l.charCodeAt(y),s|=0;return n.colors[Math.abs(s)%n.colors.length]}n.selectColor=r;function n(l){var s;function y(){if(y.enabled){for(var x=arguments.length,_=new Array(x),q=0;q<x;q++)_[q]=arguments[q];var M=y,F=Number(new Date),A=F-(s||F);M.diff=A,M.prev=s,M.curr=F,s=F,_[0]=n.coerce(_[0]),typeof _[0]!="string"&&_.unshift("%O");var te=0;_[0]=_[0].replace(/%([a-zA-Z%])/g,function(fe,yt){if(fe==="%%")return fe;te++;var Ne=n.formatters[yt];if(typeof Ne=="function"){var Ve=_[te];fe=Ne.call(M,Ve),_.splice(te,1),te--}return fe}),n.formatArgs.call(M,_);var re=M.log||n.log;re.apply(M,_)}}return y.namespace=l,y.enabled=n.enabled(l),y.useColors=n.useColors(),y.color=r(l),y.destroy=o,y.extend=a,typeof n.init=="function"&&n.init(y),n.instances.push(y),y}function o(){var l=n.instances.indexOf(this);return l!==-1?(n.instances.splice(l,1),!0):!1}function a(l,s){return n(this.namespace+(typeof s>"u"?":":s)+l)}function u(l){n.save(l),n.names=[],n.skips=[];var s,y=(typeof l=="string"?l:"").split(/[\s,]+/),x=y.length;for(s=0;s<x;s++)y[s]&&(l=y[s].replace(/\*/g,".*?"),l[0]==="-"?n.skips.push(new RegExp("^"+l.substr(1)+"$")):n.names.push(new RegExp("^"+l+"$")));for(s=0;s<n.instances.length;s++){var _=n.instances[s];_.enabled=n.enabled(_.namespace)}}function c(){n.enable("")}function f(l){if(l[l.length-1]==="*")return!0;var s,y;for(s=0,y=n.skips.length;s<y;s++)if(n.skips[s].test(l))return!1;for(s=0,y=n.names.length;s<y;s++)if(n.names[s].test(l))return!0;return!1}function w(l){return l instanceof Error?l.stack||l.message:l}return n.enable(n.load()),n}return Gt=e,Gt}var Jr;function D(){return Jr||(Jr=1,function(e,t){function r(l){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?r=function(y){return typeof y}:r=function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},r(l)}t.log=a,t.formatArgs=o,t.save=u,t.load=c,t.useColors=n,t.storage=f(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function n(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function o(l){if(l[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+l[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!!this.useColors){var s="color: "+this.color;l.splice(1,0,s,"color: inherit");var y=0,x=0;l[0].replace(/%[a-zA-Z%]/g,function(_){_!=="%%"&&(y++,_==="%c"&&(x=y))}),l.splice(x,0,s)}}function a(){var l;return(typeof console>"u"?"undefined":r(console))==="object"&&console.log&&(l=console).log.apply(l,arguments)}function u(l){try{l?t.storage.setItem("debug",l):t.storage.removeItem("debug")}catch{}}function c(){var l;try{l=t.storage.getItem("debug")}catch{}return!l&&typeof process<"u"&&"env"in process&&(l=process.env.DEBUG),l}function f(){try{return localStorage}catch{}}e.exports=Yo()(t);var w=e.exports.formatters;w.j=function(l){try{return JSON.stringify(l)}catch(s){return"[UnexpectedJSONParseError]: "+s.message}}}(_t,_t.exports)),_t.exports}var zo=Br,Vr=function(){};process.env.NODE_ENV!=="production"&&(Vr=D()("sockjs-client:utils:url"));var oe={getOrigin:function(e){if(!e)return null;var t=new zo(e);if(t.protocol==="file:")return null;var r=t.port;return r||(r=t.protocol==="https:"?"443":"80"),t.protocol+"//"+t.hostname+":"+r},isOriginEqual:function(e,t){var r=this.getOrigin(e)===this.getOrigin(t);return Vr("same",e,t,r),r},isSchemeEqual:function(e,t){return e.split(":")[0]===t.split(":")[0]},addPath:function(e,t){var r=e.split("?");return r[0]+t+(r[1]?"?"+r[1]:"")},addQuery:function(e,t){return e+(e.indexOf("?")===-1?"?"+t:"&"+t)},isLoopbackAddr:function(e){return/^127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^\[::1\]$/.test(e)}},Yt={exports:{}};typeof Object.create=="function"?Yt.exports=function(t,r){r&&(t.super_=r,t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:Yt.exports=function(t,r){if(r){t.super_=r;var n=function(){};n.prototype=r.prototype,t.prototype=new n,t.prototype.constructor=t}};var k=Yt.exports,V={};function Ct(){this._listeners={}}Ct.prototype.addEventListener=function(e,t){e in this._listeners||(this._listeners[e]=[]);var r=this._listeners[e];r.indexOf(t)===-1&&(r=r.concat([t])),this._listeners[e]=r},Ct.prototype.removeEventListener=function(e,t){var r=this._listeners[e];if(r){var n=r.indexOf(t);if(n!==-1){r.length>1?this._listeners[e]=r.slice(0,n).concat(r.slice(n+1)):delete this._listeners[e];return}}},Ct.prototype.dispatchEvent=function(){var e=arguments[0],t=e.type,r=arguments.length===1?[e]:Array.apply(null,arguments);if(this["on"+t]&&this["on"+t].apply(this,r),t in this._listeners)for(var n=this._listeners[t],o=0;o<n.length;o++)n[o].apply(this,r)};var Gr=Ct,Ko=k,St=Gr;function Fe(){St.call(this)}Ko(Fe,St),Fe.prototype.removeAllListeners=function(e){e?delete this._listeners[e]:this._listeners={}},Fe.prototype.once=function(e,t){var r=this,n=!1;function o(){r.removeListener(e,o),n||(n=!0,t.apply(this,arguments))}this.on(e,o)},Fe.prototype.emit=function(){var e=arguments[0],t=this._listeners[e];if(t){for(var r=arguments.length,n=new Array(r-1),o=1;o<r;o++)n[o-1]=arguments[o];for(var a=0;a<t.length;a++)t[a].apply(this,n)}},Fe.prototype.on=Fe.prototype.addListener=St.prototype.addEventListener,Fe.prototype.removeListener=St.prototype.removeEventListener,V.EventEmitter=Fe;var zt={exports:{}},Yr=v.WebSocket||v.MozWebSocket;Yr?zt.exports=function(t){return new Yr(t)}:zt.exports=void 0;var Qo=zt.exports,zr=ke,Zo=oe,ei=k,Kr=V.EventEmitter,Qr=Qo,ve=function(){};process.env.NODE_ENV!=="production"&&(ve=D()("sockjs-client:websocket"));function Ce(e,t,r){if(!Ce.enabled())throw new Error("Transport created when disabled");Kr.call(this),ve("constructor",e);var n=this,o=Zo.addPath(e,"/websocket");o.slice(0,5)==="https"?o="wss"+o.slice(5):o="ws"+o.slice(4),this.url=o,this.ws=new Qr(this.url,[],r),this.ws.onmessage=function(a){ve("message event",a.data),n.emit("message",a.data)},this.unloadRef=zr.unloadAdd(function(){ve("unload"),n.ws.close()}),this.ws.onclose=function(a){ve("close event",a.code,a.reason),n.emit("close",a.code,a.reason),n._cleanup()},this.ws.onerror=function(a){ve("error event",a),n.emit("close",1006,"WebSocket connection broken"),n._cleanup()}}ei(Ce,Kr),Ce.prototype.send=function(e){var t="["+e+"]";ve("send",t),this.ws.send(t)},Ce.prototype.close=function(){ve("close");var e=this.ws;this._cleanup(),e&&e.close()},Ce.prototype._cleanup=function(){ve("_cleanup");var e=this.ws;e&&(e.onmessage=e.onclose=e.onerror=null),zr.unloadDel(this.unloadRef),this.unloadRef=this.ws=null,this.removeAllListeners()},Ce.enabled=function(){return ve("enabled"),!!Qr},Ce.transportName="websocket",Ce.roundTrips=2;var ti=Ce,ri=k,Zr=V.EventEmitter,me=function(){};process.env.NODE_ENV!=="production"&&(me=D()("sockjs-client:buffered-sender"));function Pe(e,t){me(e),Zr.call(this),this.sendBuffer=[],this.sender=t,this.url=e}ri(Pe,Zr),Pe.prototype.send=function(e){me("send",e),this.sendBuffer.push(e),this.sendStop||this.sendSchedule()},Pe.prototype.sendScheduleWait=function(){me("sendScheduleWait");var e=this,t;this.sendStop=function(){me("sendStop"),e.sendStop=null,clearTimeout(t)},t=setTimeout(function(){me("timeout"),e.sendStop=null,e.sendSchedule()},25)},Pe.prototype.sendSchedule=function(){me("sendSchedule",this.sendBuffer.length);var e=this;if(this.sendBuffer.length>0){var t="["+this.sendBuffer.join(",")+"]";this.sendStop=this.sender(this.url,t,function(r){e.sendStop=null,r?(me("error",r),e.emit("close",r.code||1006,"Sending error: "+r),e.close()):e.sendScheduleWait()}),this.sendBuffer=[]}},Pe.prototype._cleanup=function(){me("_cleanup"),this.removeAllListeners()},Pe.prototype.close=function(){me("close"),this._cleanup(),this.sendStop&&(this.sendStop(),this.sendStop=null)};var ni=Pe,oi=k,en=V.EventEmitter,Be=function(){};process.env.NODE_ENV!=="production"&&(Be=D()("sockjs-client:polling"));function xt(e,t,r){Be(t),en.call(this),this.Receiver=e,this.receiveUrl=t,this.AjaxObject=r,this._scheduleReceiver()}oi(xt,en),xt.prototype._scheduleReceiver=function(){Be("_scheduleReceiver");var e=this,t=this.poll=new this.Receiver(this.receiveUrl,this.AjaxObject);t.on("message",function(r){Be("message",r),e.emit("message",r)}),t.once("close",function(r,n){Be("close",r,n,e.pollIsClosing),e.poll=t=null,e.pollIsClosing||(n==="network"?e._scheduleReceiver():(e.emit("close",r||1006,n),e.removeAllListeners()))})},xt.prototype.abort=function(){Be("abort"),this.removeAllListeners(),this.pollIsClosing=!0,this.poll&&this.poll.abort()};var ii=xt,si=k,ai=oe,Kt=ni,ui=ii,et=function(){};process.env.NODE_ENV!=="production"&&(et=D()("sockjs-client:sender-receiver"));function Qt(e,t,r,n,o){var a=ai.addPath(e,t);et(a);var u=this;Kt.call(this,e,r),this.poll=new ui(n,a,o),this.poll.on("message",function(c){et("poll message",c),u.emit("message",c)}),this.poll.once("close",function(c,f){et("poll close",c,f),u.poll=null,u.emit("close",c,f),u.close()})}si(Qt,Kt),Qt.prototype.close=function(){Kt.prototype.close.call(this),et("close"),this.removeAllListeners(),this.poll&&(this.poll.abort(),this.poll=null)};var tn=Qt,ci=k,li=oe,rn=tn,Ot=function(){};process.env.NODE_ENV!=="production"&&(Ot=D()("sockjs-client:ajax-based"));function fi(e){return function(t,r,n){Ot("create ajax sender",t,r);var o={};typeof r=="string"&&(o.headers={"Content-type":"text/plain"});var a=li.addPath(t,"/xhr_send"),u=new e("POST",a,r,o);return u.once("finish",function(c){if(Ot("finish",c),u=null,c!==200&&c!==204)return n(new Error("http status "+c));n()}),function(){Ot("abort"),u.close(),u=null;var c=new Error("Aborted");c.code=1e3,n(c)}}}function nn(e,t,r,n){rn.call(this,e,t,fi(n),r,n)}ci(nn,rn);var Xe=nn,hi=k,on=V.EventEmitter,Se=function(){};process.env.NODE_ENV!=="production"&&(Se=D()("sockjs-client:receiver:xhr"));function tt(e,t){Se(e),on.call(this);var r=this;this.bufferPosition=0,this.xo=new t("POST",e,null),this.xo.on("chunk",this._chunkHandler.bind(this)),this.xo.once("finish",function(n,o){Se("finish",n,o),r._chunkHandler(n,o),r.xo=null;var a=n===200?"network":"permanent";Se("close",a),r.emit("close",null,a),r._cleanup()})}hi(tt,on),tt.prototype._chunkHandler=function(e,t){if(Se("_chunkHandler",e),!(e!==200||!t))for(var r=-1;;this.bufferPosition+=r+1){var n=t.slice(this.bufferPosition);if(r=n.indexOf(`
`),r===-1)break;var o=n.slice(0,r);o&&(Se("message",o),this.emit("message",o))}},tt.prototype._cleanup=function(){Se("_cleanup"),this.removeAllListeners()},tt.prototype.abort=function(){Se("abort"),this.xo&&(this.xo.close(),Se("close"),this.emit("close",null,"user"),this.xo=null),this._cleanup()};var Rt=tt,sn=V.EventEmitter,di=k,an=ke,pi=oe,rt=v.XMLHttpRequest,Y=function(){};process.env.NODE_ENV!=="production"&&(Y=D()("sockjs-client:browser:xhr"));function be(e,t,r,n){Y(e,t);var o=this;sn.call(this),setTimeout(function(){o._start(e,t,r,n)},0)}di(be,sn),be.prototype._start=function(e,t,r,n){var o=this;try{this.xhr=new rt}catch{}if(!this.xhr){Y("no xhr"),this.emit("finish",0,"no xhr support"),this._cleanup();return}t=pi.addQuery(t,"t="+ +new Date),this.unloadRef=an.unloadAdd(function(){Y("unload cleanup"),o._cleanup(!0)});try{this.xhr.open(e,t,!0),this.timeout&&"timeout"in this.xhr&&(this.xhr.timeout=this.timeout,this.xhr.ontimeout=function(){Y("xhr timeout"),o.emit("finish",0,""),o._cleanup(!1)})}catch(u){Y("exception",u),this.emit("finish",0,""),this._cleanup(!1);return}if((!n||!n.noCredentials)&&be.supportsCORS&&(Y("withCredentials"),this.xhr.withCredentials=!0),n&&n.headers)for(var a in n.headers)this.xhr.setRequestHeader(a,n.headers[a]);this.xhr.onreadystatechange=function(){if(o.xhr){var u=o.xhr,c,f;switch(Y("readyState",u.readyState),u.readyState){case 3:try{f=u.status,c=u.responseText}catch{}Y("status",f),f===1223&&(f=204),f===200&&c&&c.length>0&&(Y("chunk"),o.emit("chunk",f,c));break;case 4:f=u.status,Y("status",f),f===1223&&(f=204),(f===12005||f===12029)&&(f=0),Y("finish",f,u.responseText),o.emit("finish",f,u.responseText),o._cleanup(!1);break}}};try{o.xhr.send(r)}catch{o.emit("finish",0,""),o._cleanup(!1)}},be.prototype._cleanup=function(e){if(Y("cleanup"),!!this.xhr){if(this.removeAllListeners(),an.unloadDel(this.unloadRef),this.xhr.onreadystatechange=function(){},this.xhr.ontimeout&&(this.xhr.ontimeout=null),e)try{this.xhr.abort()}catch{}this.unloadRef=this.xhr=null}},be.prototype.close=function(){Y("close"),this._cleanup(!0)},be.enabled=!!rt;var un=["Active"].concat("Object").join("X");!be.enabled&&un in v&&(Y("overriding xmlhttprequest"),rt=function(){try{return new v[un]("Microsoft.XMLHTTP")}catch{return null}},be.enabled=!!new rt);var cn=!1;try{cn="withCredentials"in new rt}catch{}be.supportsCORS=cn;var ln=be,vi=k,Tt=ln;function Zt(e,t,r,n){Tt.call(this,e,t,r,n)}vi(Zt,Tt),Zt.enabled=Tt.enabled&&Tt.supportsCORS;var jt=Zt,mi=k,er=ln;function tr(e,t,r){er.call(this,e,t,r,{noCredentials:!0})}mi(tr,er),tr.enabled=er.enabled;var nt=tr,ot={isOpera:function(){return v.navigator&&/opera/i.test(v.navigator.userAgent)},isKonqueror:function(){return v.navigator&&/konqueror/i.test(v.navigator.userAgent)},hasDomain:function(){if(!v.document)return!0;try{return!!v.document.domain}catch{return!1}}},bi=k,fn=Xe,gi=Rt,rr=jt,yi=nt,Ei=ot;function qe(e){if(!yi.enabled&&!rr.enabled)throw new Error("Transport created when disabled");fn.call(this,e,"/xhr_streaming",gi,rr)}bi(qe,fn),qe.enabled=function(e){return e.nullOrigin||Ei.isOpera()?!1:rr.enabled},qe.transportName="xhr-streaming",qe.roundTrips=2,qe.needBody=!!v.document;var wi=qe,hn=V.EventEmitter,_i=k,dn=ke,Ci=ot,Si=oe,xe=function(){};process.env.NODE_ENV!=="production"&&(xe=D()("sockjs-client:sender:xdr"));function $e(e,t,r){xe(e,t);var n=this;hn.call(this),setTimeout(function(){n._start(e,t,r)},0)}_i($e,hn),$e.prototype._start=function(e,t,r){xe("_start");var n=this,o=new v.XDomainRequest;t=Si.addQuery(t,"t="+ +new Date),o.onerror=function(){xe("onerror"),n._error()},o.ontimeout=function(){xe("ontimeout"),n._error()},o.onprogress=function(){xe("progress",o.responseText),n.emit("chunk",200,o.responseText)},o.onload=function(){xe("load"),n.emit("finish",200,o.responseText),n._cleanup(!1)},this.xdr=o,this.unloadRef=dn.unloadAdd(function(){n._cleanup(!0)});try{this.xdr.open(e,t),this.timeout&&(this.xdr.timeout=this.timeout),this.xdr.send(r)}catch{this._error()}},$e.prototype._error=function(){this.emit("finish",0,""),this._cleanup(!1)},$e.prototype._cleanup=function(e){if(xe("cleanup",e),!!this.xdr){if(this.removeAllListeners(),dn.unloadDel(this.unloadRef),this.xdr.ontimeout=this.xdr.onerror=this.xdr.onprogress=this.xdr.onload=null,e)try{this.xdr.abort()}catch{}this.unloadRef=this.xdr=null}},$e.prototype.close=function(){xe("close"),this._cleanup(!0)},$e.enabled=!!(v.XDomainRequest&&Ci.hasDomain());var nr=$e,xi=k,pn=Xe,Oi=Rt,or=nr;function it(e){if(!or.enabled)throw new Error("Transport created when disabled");pn.call(this,e,"/xhr_streaming",Oi,or)}xi(it,pn),it.enabled=function(e){return e.cookie_needed||e.nullOrigin?!1:or.enabled&&e.sameScheme},it.transportName="xdr-streaming",it.roundTrips=2;var vn=it,mn=v.EventSource,Ri=k,bn=V.EventEmitter,Ti=mn,Ie=function(){};process.env.NODE_ENV!=="production"&&(Ie=D()("sockjs-client:receiver:eventsource"));function st(e){Ie(e),bn.call(this);var t=this,r=this.es=new Ti(e);r.onmessage=function(n){Ie("message",n.data),t.emit("message",decodeURI(n.data))},r.onerror=function(n){Ie("error",r.readyState,n);var o=r.readyState!==2?"network":"permanent";t._cleanup(),t._close(o)}}Ri(st,bn),st.prototype.abort=function(){Ie("abort"),this._cleanup(),this._close("user")},st.prototype._cleanup=function(){Ie("cleanup");var e=this.es;e&&(e.onmessage=e.onerror=null,e.close(),this.es=null)},st.prototype._close=function(e){Ie("close",e);var t=this;setTimeout(function(){t.emit("close",null,e),t.removeAllListeners()},200)};var ji=st,ki=k,gn=Xe,Fi=ji,Ni=jt,Pi=mn;function Je(e){if(!Je.enabled())throw new Error("Transport created when disabled");gn.call(this,e,"/eventsource",Fi,Ni)}ki(Je,gn),Je.enabled=function(){return!!Pi},Je.transportName="eventsource",Je.roundTrips=2;var yn=Je,ir,En;function wn(){return En||(En=1,ir="1.6.1"),ir}var _n={exports:{}};(function(e){var t=ke,r=ot,n=function(){};process.env.NODE_ENV!=="production"&&(n=D()("sockjs-client:utils:iframe")),e.exports={WPrefix:"_jp",currentWindowId:null,polluteGlobalNamespace:function(){e.exports.WPrefix in v||(v[e.exports.WPrefix]={})},postMessage:function(o,a){v.parent!==v?v.parent.postMessage(JSON.stringify({windowId:e.exports.currentWindowId,type:o,data:a||""}),"*"):n("Cannot postMessage, no parent window.",o,a)},createIframe:function(o,a){var u=v.document.createElement("iframe"),c,f,w=function(){n("unattach"),clearTimeout(c);try{u.onload=null}catch{}u.onerror=null},l=function(){n("cleanup"),u&&(w(),setTimeout(function(){u&&u.parentNode.removeChild(u),u=null},0),t.unloadDel(f))},s=function(x){n("onerror",x),u&&(l(),a(x))},y=function(x,_){n("post",x,_),setTimeout(function(){try{u&&u.contentWindow&&u.contentWindow.postMessage(x,_)}catch{}},0)};return u.src=o,u.style.display="none",u.style.position="absolute",u.onerror=function(){s("onerror")},u.onload=function(){n("onload"),clearTimeout(c),c=setTimeout(function(){s("onload timeout")},2e3)},v.document.body.appendChild(u),c=setTimeout(function(){s("timeout")},15e3),f=t.unloadAdd(l),{post:y,cleanup:l,loaded:w}},createHtmlfile:function(o,a){var u=["Active"].concat("Object").join("X"),c=new v[u]("htmlfile"),f,w,l,s=function(){clearTimeout(f),l.onerror=null},y=function(){c&&(s(),t.unloadDel(w),l.parentNode.removeChild(l),l=c=null,CollectGarbage())},x=function(M){n("onerror",M),c&&(y(),a(M))},_=function(M,F){try{setTimeout(function(){l&&l.contentWindow&&l.contentWindow.postMessage(M,F)},0)}catch{}};c.open(),c.write('<html><script>document.domain="'+v.document.domain+'";<\/script></html>'),c.close(),c.parentWindow[e.exports.WPrefix]=v[e.exports.WPrefix];var q=c.createElement("div");return c.body.appendChild(q),l=c.createElement("iframe"),q.appendChild(l),l.src=o,l.onerror=function(){x("onerror")},f=setTimeout(function(){x("timeout")},15e3),w=t.unloadAdd(y),{post:_,cleanup:y,loaded:s}}},e.exports.iframeEnabled=!1,v.document&&(e.exports.iframeEnabled=(typeof v.postMessage=="function"||typeof v.postMessage=="object")&&!r.isKonqueror())})(_n);var at=_n.exports,$i=k,Cn=V.EventEmitter,Ii=wn(),sr=oe,Sn=at,xn=ke,Ai=He,ce=function(){};process.env.NODE_ENV!=="production"&&(ce=D()("sockjs-client:transport:iframe"));function ge(e,t,r){if(!ge.enabled())throw new Error("Transport created when disabled");Cn.call(this);var n=this;this.origin=sr.getOrigin(r),this.baseUrl=r,this.transUrl=t,this.transport=e,this.windowId=Ai.string(8);var o=sr.addPath(r,"/iframe.html")+"#"+this.windowId;ce(e,t,o),this.iframeObj=Sn.createIframe(o,function(a){ce("err callback"),n.emit("close",1006,"Unable to load an iframe ("+a+")"),n.close()}),this.onmessageCallback=this._message.bind(this),xn.attachEvent("message",this.onmessageCallback)}$i(ge,Cn),ge.prototype.close=function(){if(ce("close"),this.removeAllListeners(),this.iframeObj){xn.detachEvent("message",this.onmessageCallback);try{this.postMessage("c")}catch{}this.iframeObj.cleanup(),this.iframeObj=null,this.onmessageCallback=this.iframeObj=null}},ge.prototype._message=function(e){if(ce("message",e.data),!sr.isOriginEqual(e.origin,this.origin)){ce("not same origin",e.origin,this.origin);return}var t;try{t=JSON.parse(e.data)}catch{ce("bad json",e.data);return}if(t.windowId!==this.windowId){ce("mismatched window id",t.windowId,this.windowId);return}switch(t.type){case"s":this.iframeObj.loaded(),this.postMessage("s",JSON.stringify([Ii,this.transport,this.transUrl,this.baseUrl]));break;case"t":this.emit("message",t.data);break;case"c":var r;try{r=JSON.parse(t.data)}catch{ce("bad json",t.data);return}this.emit("close",r[0],r[1]),this.close();break}},ge.prototype.postMessage=function(e,t){ce("postMessage",e,t),this.iframeObj.post(JSON.stringify({windowId:this.windowId,type:e,data:t||""}),this.origin)},ge.prototype.send=function(e){ce("send",e),this.postMessage("m",e)},ge.enabled=function(){return Sn.iframeEnabled},ge.transportName="iframe",ge.roundTrips=2;var On=ge,ar={isObject:function(e){var t=typeof e;return t==="function"||t==="object"&&!!e},extend:function(e){if(!this.isObject(e))return e;for(var t,r,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}},Li=k,kt=On,Di=ar,ur=function(e){function t(r,n){kt.call(this,e.transportName,r,n)}return Li(t,kt),t.enabled=function(r,n){if(!v.document)return!1;var o=Di.extend({},n);return o.sameOrigin=!0,e.enabled(o)&&kt.enabled()},t.transportName="iframe-"+e.transportName,t.needBody=!0,t.roundTrips=kt.roundTrips+e.roundTrips-1,t.facadeTransport=e,t},Ui=k,Ae=at,Mi=oe,Rn=V.EventEmitter,Wi=He,ye=function(){};process.env.NODE_ENV!=="production"&&(ye=D()("sockjs-client:receiver:htmlfile"));function le(e){ye(e),Rn.call(this);var t=this;Ae.polluteGlobalNamespace(),this.id="a"+Wi.string(6),e=Mi.addQuery(e,"c="+decodeURIComponent(Ae.WPrefix+"."+this.id)),ye("using htmlfile",le.htmlfileEnabled);var r=le.htmlfileEnabled?Ae.createHtmlfile:Ae.createIframe;v[Ae.WPrefix][this.id]={start:function(){ye("start"),t.iframeObj.loaded()},message:function(n){ye("message",n),t.emit("message",n)},stop:function(){ye("stop"),t._cleanup(),t._close("network")}},this.iframeObj=r(e,function(){ye("callback"),t._cleanup(),t._close("permanent")})}Ui(le,Rn),le.prototype.abort=function(){ye("abort"),this._cleanup(),this._close("user")},le.prototype._cleanup=function(){ye("_cleanup"),this.iframeObj&&(this.iframeObj.cleanup(),this.iframeObj=null),delete v[Ae.WPrefix][this.id]},le.prototype._close=function(e){ye("_close",e),this.emit("close",null,e),this.removeAllListeners()},le.htmlfileEnabled=!1;var Tn=["Active"].concat("Object").join("X");if(Tn in v)try{le.htmlfileEnabled=!!new v[Tn]("htmlfile")}catch{}le.enabled=le.htmlfileEnabled||Ae.iframeEnabled;var Hi=le,Bi=k,cr=Hi,Xi=nt,jn=Xe;function ut(e){if(!cr.enabled)throw new Error("Transport created when disabled");jn.call(this,e,"/htmlfile",cr,Xi)}Bi(ut,jn),ut.enabled=function(e){return cr.enabled&&e.sameOrigin},ut.transportName="htmlfile",ut.roundTrips=2;var kn=ut,qi=k,Fn=Xe,Ji=Rt,lr=jt,Nn=nt;function ct(e){if(!Nn.enabled&&!lr.enabled)throw new Error("Transport created when disabled");Fn.call(this,e,"/xhr",Ji,lr)}qi(ct,Fn),ct.enabled=function(e){return e.nullOrigin?!1:Nn.enabled&&e.sameOrigin?!0:lr.enabled},ct.transportName="xhr-polling",ct.roundTrips=2;var Pn=ct,Vi=k,$n=Xe,Gi=vn,Yi=Rt,In=nr;function lt(e){if(!In.enabled)throw new Error("Transport created when disabled");$n.call(this,e,"/xhr",Yi,In)}Vi(lt,$n),lt.enabled=Gi.enabled,lt.transportName="xdr-polling",lt.roundTrips=2;var zi=lt,ft=at,An=He,Ki=ot,Qi=oe,Zi=k,Ln=V.EventEmitter,ie=function(){};process.env.NODE_ENV!=="production"&&(ie=D()("sockjs-client:receiver:jsonp"));function se(e){ie(e);var t=this;Ln.call(this),ft.polluteGlobalNamespace(),this.id="a"+An.string(6);var r=Qi.addQuery(e,"c="+encodeURIComponent(ft.WPrefix+"."+this.id));v[ft.WPrefix][this.id]=this._callback.bind(this),this._createScript(r),this.timeoutId=setTimeout(function(){ie("timeout"),t._abort(new Error("JSONP script loaded abnormally (timeout)"))},se.timeout)}Zi(se,Ln),se.prototype.abort=function(){if(ie("abort"),v[ft.WPrefix][this.id]){var e=new Error("JSONP user aborted read");e.code=1e3,this._abort(e)}},se.timeout=35e3,se.scriptErrorTimeout=1e3,se.prototype._callback=function(e){ie("_callback",e),this._cleanup(),!this.aborting&&(e&&(ie("message",e),this.emit("message",e)),this.emit("close",null,"network"),this.removeAllListeners())},se.prototype._abort=function(e){ie("_abort",e),this._cleanup(),this.aborting=!0,this.emit("close",e.code,e.message),this.removeAllListeners()},se.prototype._cleanup=function(){if(ie("_cleanup"),clearTimeout(this.timeoutId),this.script2&&(this.script2.parentNode.removeChild(this.script2),this.script2=null),this.script){var e=this.script;e.parentNode.removeChild(e),e.onreadystatechange=e.onerror=e.onload=e.onclick=null,this.script=null}delete v[ft.WPrefix][this.id]},se.prototype._scriptError=function(){ie("_scriptError");var e=this;this.errorTimer||(this.errorTimer=setTimeout(function(){e.loadedOkay||e._abort(new Error("JSONP script loaded abnormally (onerror)"))},se.scriptErrorTimeout))},se.prototype._createScript=function(e){ie("_createScript",e);var t=this,r=this.script=v.document.createElement("script"),n;if(r.id="a"+An.string(8),r.src=e,r.type="text/javascript",r.charset="UTF-8",r.onerror=this._scriptError.bind(this),r.onload=function(){ie("onload"),t._abort(new Error("JSONP script loaded abnormally (onload)"))},r.onreadystatechange=function(){if(ie("onreadystatechange",r.readyState),/loaded|closed/.test(r.readyState)){if(r&&r.htmlFor&&r.onclick){t.loadedOkay=!0;try{r.onclick()}catch{}}r&&t._abort(new Error("JSONP script loaded abnormally (onreadystatechange)"))}},typeof r.async>"u"&&v.document.attachEvent)if(Ki.isOpera())n=this.script2=v.document.createElement("script"),n.text="try{var a = document.getElementById('"+r.id+"'); if(a)a.onerror();}catch(x){};",r.async=n.async=!1;else{try{r.htmlFor=r.id,r.event="onclick"}catch{}r.async=!0}typeof r.async<"u"&&(r.async=!0);var o=v.document.getElementsByTagName("head")[0];o.insertBefore(r,o.firstChild),n&&o.insertBefore(n,o.firstChild)};var es=se,ts=He,Dn=oe,Ee=function(){};process.env.NODE_ENV!=="production"&&(Ee=D()("sockjs-client:sender:jsonp"));var ee,ht;function rs(e){Ee("createIframe",e);try{return v.document.createElement('<iframe name="'+e+'">')}catch{var t=v.document.createElement("iframe");return t.name=e,t}}function ns(){Ee("createForm"),ee=v.document.createElement("form"),ee.style.display="none",ee.style.position="absolute",ee.method="POST",ee.enctype="application/x-www-form-urlencoded",ee.acceptCharset="UTF-8",ht=v.document.createElement("textarea"),ht.name="d",ee.appendChild(ht),v.document.body.appendChild(ee)}var os=function(e,t,r){Ee(e,t),ee||ns();var n="a"+ts.string(8);ee.target=n,ee.action=Dn.addQuery(Dn.addPath(e,"/jsonp_send"),"i="+n);var o=rs(n);o.id=n,o.style.display="none",ee.appendChild(o);try{ht.value=t}catch{}ee.submit();var a=function(u){Ee("completed",n,u),o.onerror&&(o.onreadystatechange=o.onerror=o.onload=null,setTimeout(function(){Ee("cleaning up",n),o.parentNode.removeChild(o),o=null},500),ht.value="",r(u))};return o.onerror=function(){Ee("onerror",n),a()},o.onload=function(){Ee("onload",n),a()},o.onreadystatechange=function(u){Ee("onreadystatechange",n,o.readyState,u),o.readyState==="complete"&&a()},function(){Ee("aborted",n),a(new Error("Aborted"))}},is=k,Un=tn,ss=es,as=os;function Le(e){if(!Le.enabled())throw new Error("Transport created when disabled");Un.call(this,e,"/jsonp",as,ss)}is(Le,Un),Le.enabled=function(){return!!v.document},Le.transportName="jsonp-polling",Le.roundTrips=1,Le.needBody=!0;var us=Le,cs=[ti,wi,vn,yn,ur(yn),kn,ur(kn),Pn,zi,ur(Pn),us],dt=Array.prototype,fr=Object.prototype,ls=Function.prototype,pt=String.prototype,hr=dt.slice,dr=fr.toString,Mn=function(e){return fr.toString.call(e)==="[object Function]"},fs=function(t){return dr.call(t)==="[object Array]"},Wn=function(t){return dr.call(t)==="[object String]"},hs=Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch{return!1}}(),pr;hs?pr=function(e,t,r,n){!n&&t in e||Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:!0,value:r})}:pr=function(e,t,r,n){!n&&t in e||(e[t]=r)};var vt=function(e,t,r){for(var n in t)fr.hasOwnProperty.call(t,n)&&pr(e,n,t[n],r)},Hn=function(e){if(e==null)throw new TypeError("can't convert "+e+" to object");return Object(e)};function ds(e){var t=+e;return t!==t?t=0:t!==0&&t!==1/0&&t!==-1/0&&(t=(t>0||-1)*Math.floor(Math.abs(t))),t}function ps(e){return e>>>0}function vr(){}vt(ls,{bind:function(t){var r=this;if(!Mn(r))throw new TypeError("Function.prototype.bind called on incompatible "+r);for(var n=hr.call(arguments,1),o=function(){if(this instanceof f){var w=r.apply(this,n.concat(hr.call(arguments)));return Object(w)===w?w:this}else return r.apply(t,n.concat(hr.call(arguments)))},a=Math.max(0,r.length-n.length),u=[],c=0;c<a;c++)u.push("$"+c);var f=Function("binder","return function ("+u.join(",")+"){ return binder.apply(this, arguments); }")(o);return r.prototype&&(vr.prototype=r.prototype,f.prototype=new vr,vr.prototype=null),f}}),vt(Array,{isArray:fs});var Bn=Object("a"),Xn=Bn[0]!=="a"||!(0 in Bn),vs=function(t){var r=!0,n=!0;return t&&(t.call("foo",function(o,a,u){typeof u!="object"&&(r=!1)}),t.call([1],function(){n=typeof this=="string"},"x")),!!t&&r&&n};vt(dt,{forEach:function(t){var r=Hn(this),n=Xn&&Wn(this)?this.split(""):r,o=arguments[1],a=-1,u=n.length>>>0;if(!Mn(t))throw new TypeError;for(;++a<u;)a in n&&t.call(o,n[a],a,r)}},!vs(dt.forEach));var ms=Array.prototype.indexOf&&[0,1].indexOf(1,2)!==-1;vt(dt,{indexOf:function(t){var r=Xn&&Wn(this)?this.split(""):Hn(this),n=r.length>>>0;if(!n)return-1;var o=0;for(arguments.length>1&&(o=ds(arguments[1])),o=o>=0?o:Math.max(0,n+o);o<n;o++)if(o in r&&r[o]===t)return o;return-1}},ms);var qn=pt.split;"ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||"tesst".split(/(s)*/)[1]==="t"||"test".split(/(?:)/,-1).length!==4||"".split(/.?/).length||".".split(/()()/).length>1?function(){var e=/()??/.exec("")[1]===void 0;pt.split=function(t,r){var n=this;if(t===void 0&&r===0)return[];if(dr.call(t)!=="[object RegExp]")return qn.call(this,t,r);var o=[],a=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.extended?"x":"")+(t.sticky?"y":""),u=0,c,f,w,l;for(t=new RegExp(t.source,a+"g"),n+="",e||(c=new RegExp("^"+t.source+"$(?!\\s)",a)),r=r===void 0?-1>>>0:ps(r);(f=t.exec(n))&&(w=f.index+f[0].length,!(w>u&&(o.push(n.slice(u,f.index)),!e&&f.length>1&&f[0].replace(c,function(){for(var s=1;s<arguments.length-2;s++)arguments[s]===void 0&&(f[s]=void 0)}),f.length>1&&f.index<n.length&&dt.push.apply(o,f.slice(1)),l=f[0].length,u=w,o.length>=r)));)t.lastIndex===f.index&&t.lastIndex++;return u===n.length?(l||!t.test(""))&&o.push(""):o.push(n.slice(u)),o.length>r?o.slice(0,r):o}}():"0".split(void 0,0).length&&(pt.split=function(t,r){return t===void 0&&r===0?[]:qn.call(this,t,r)});var bs=pt.substr,gs="".substr&&"0b".substr(-1)!=="b";vt(pt,{substr:function(t,r){return bs.call(this,t<0&&(t=this.length+t)<0?0:t,r)}},gs);var Ft=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g,mr,ys=function(e){var t,r={},n=[];for(t=0;t<65536;t++)n.push(String.fromCharCode(t));return e.lastIndex=0,n.join("").replace(e,function(o){return r[o]="\\u"+("0000"+o.charCodeAt(0).toString(16)).slice(-4),""}),e.lastIndex=0,r},Es={quote:function(e){var t=JSON.stringify(e);return Ft.lastIndex=0,Ft.test(t)?(mr||(mr=ys(Ft)),t.replace(Ft,function(r){return mr[r]})):t}},mt=function(){};process.env.NODE_ENV!=="production"&&(mt=D()("sockjs-client:utils:transport"));var ws=function(e){return{filterToEnabled:function(t,r){var n={main:[],facade:[]};return t?typeof t=="string"&&(t=[t]):t=[],e.forEach(function(o){if(o){if(o.transportName==="websocket"&&r.websocket===!1){mt("disabled from server","websocket");return}if(t.length&&t.indexOf(o.transportName)===-1){mt("not in whitelist",o.transportName);return}o.enabled(r)?(mt("enabled",o.transportName),n.main.push(o),o.facadeTransport&&n.facade.push(o.facadeTransport)):mt("disabled",o.transportName)}}),n}}},br={};["log","debug","warn"].forEach(function(e){var t;try{t=v.console&&v.console[e]&&v.console[e].apply}catch{}br[e]=t?function(){return v.console[e].apply(v.console,arguments)}:e==="log"?function(){}:br.log});var _s=br;function De(e){this.type=e}De.prototype.initEvent=function(e,t,r){return this.type=e,this.bubbles=t,this.cancelable=r,this.timeStamp=+new Date,this},De.prototype.stopPropagation=function(){},De.prototype.preventDefault=function(){},De.CAPTURING_PHASE=1,De.AT_TARGET=2,De.BUBBLING_PHASE=3;var gr=De,Jn=v.location||{origin:"http://localhost:80",protocol:"http:",host:"localhost",port:80,href:"http://localhost/",hash:""},Cs=k,Vn=gr;function Gn(){Vn.call(this),this.initEvent("close",!1,!1),this.wasClean=!1,this.code=0,this.reason=""}Cs(Gn,Vn);var Ss=Gn,xs=k,Yn=gr;function zn(e){Yn.call(this),this.initEvent("message",!1,!1),this.data=e}xs(zn,Yn);var Os=zn,Kn=V.EventEmitter,Rs=k;function bt(){var e=this;Kn.call(this),this.to=setTimeout(function(){e.emit("finish",200,"{}")},bt.timeout)}Rs(bt,Kn),bt.prototype.close=function(){clearTimeout(this.to)},bt.timeout=2e3;var Ts=bt,Qn=V.EventEmitter,js=k,ks=ar,Zn=function(){};process.env.NODE_ENV!=="production"&&(Zn=D()("sockjs-client:info-ajax"));function yr(e,t){Qn.call(this);var r=this,n=+new Date;this.xo=new t("GET",e),this.xo.once("finish",function(o,a){var u,c;if(o===200){if(c=+new Date-n,a)try{u=JSON.parse(a)}catch{Zn("bad json",a)}ks.isObject(u)||(u={})}r.emit("finish",u,c),r.removeAllListeners()})}js(yr,Qn),yr.prototype.close=function(){this.removeAllListeners(),this.xo.close()};var eo=yr,Fs=k,to=V.EventEmitter,Ns=nt,Ps=eo;function Nt(e){var t=this;to.call(this),this.ir=new Ps(e,Ns),this.ir.once("finish",function(r,n){t.ir=null,t.emit("message",JSON.stringify([r,n]))})}Fs(Nt,to),Nt.transportName="iframe-info-receiver",Nt.prototype.close=function(){this.ir&&(this.ir.close(),this.ir=null),this.removeAllListeners()};var ro=Nt,no=V.EventEmitter,$s=k,Is=ke,oo=On,As=ro,io=function(){};process.env.NODE_ENV!=="production"&&(io=D()("sockjs-client:info-iframe"));function Pt(e,t){var r=this;no.call(this);var n=function(){var o=r.ifr=new oo(As.transportName,t,e);o.once("message",function(a){if(a){var u;try{u=JSON.parse(a)}catch{io("bad json",a),r.emit("finish"),r.close();return}var c=u[0],f=u[1];r.emit("finish",c,f)}r.close()}),o.once("close",function(){r.emit("finish"),r.close()})};v.document.body?n():Is.attachEvent("load",n)}$s(Pt,no),Pt.enabled=function(){return oo.enabled()},Pt.prototype.close=function(){this.ifr&&this.ifr.close(),this.removeAllListeners(),this.ifr=null};var Ls=Pt,so=V.EventEmitter,Ds=k,Us=oe,ao=nr,uo=jt,Ms=nt,Ws=Ts,co=Ls,$t=eo,Ue=function(){};process.env.NODE_ENV!=="production"&&(Ue=D()("sockjs-client:info-receiver"));function Oe(e,t){Ue(e);var r=this;so.call(this),setTimeout(function(){r.doXhr(e,t)},0)}Ds(Oe,so),Oe._getReceiver=function(e,t,r){return r.sameOrigin?new $t(t,Ms):uo.enabled?new $t(t,uo):ao.enabled&&r.sameScheme?new $t(t,ao):co.enabled()?new co(e,t):new $t(t,Ws)},Oe.prototype.doXhr=function(e,t){var r=this,n=Us.addPath(e,"/info");Ue("doXhr",n),this.xo=Oe._getReceiver(e,n,t),this.timeoutRef=setTimeout(function(){Ue("timeout"),r._cleanup(!1),r.emit("finish")},Oe.timeout),this.xo.once("finish",function(o,a){Ue("finish",o,a),r._cleanup(!0),r.emit("finish",o,a)})},Oe.prototype._cleanup=function(e){Ue("_cleanup"),clearTimeout(this.timeoutRef),this.timeoutRef=null,!e&&this.xo&&this.xo.close(),this.xo=null},Oe.prototype.close=function(){Ue("close"),this.removeAllListeners(),this._cleanup(!1)},Oe.timeout=8e3;var Hs=Oe,Er,lo;function Bs(){if(lo)return Er;lo=1;var e=at;function t(r){this._transport=r,r.on("message",this._transportMessage.bind(this)),r.on("close",this._transportClose.bind(this))}return t.prototype._transportClose=function(r,n){e.postMessage("c",JSON.stringify([r,n]))},t.prototype._transportMessage=function(r){e.postMessage("t",r)},t.prototype._send=function(r){this._transport.send(r)},t.prototype._close=function(){this._transport.close(),this._transport.removeAllListeners()},Er=t,Er}var wr,fo;function Xs(){if(fo)return wr;fo=1;var e=oe,t=ke,r=Bs(),n=ro,o=at,a=Jn,u=function(){};return process.env.NODE_ENV!=="production"&&(u=D()("sockjs-client:iframe-bootstrap")),wr=function(c,f){var w={};f.forEach(function(s){s.facadeTransport&&(w[s.facadeTransport.transportName]=s.facadeTransport)}),w[n.transportName]=n;var l;c.bootstrap_iframe=function(){var s;o.currentWindowId=a.hash.slice(1);var y=function(x){if(x.source===parent&&(typeof l>"u"&&(l=x.origin),x.origin===l)){var _;try{_=JSON.parse(x.data)}catch{u("bad json",x.data);return}if(_.windowId===o.currentWindowId)switch(_.type){case"s":var q;try{q=JSON.parse(_.data)}catch{u("bad json",_.data);break}var M=q[0],F=q[1],A=q[2],te=q[3];if(u(M,F,A,te),M!==c.version)throw new Error('Incompatible SockJS! Main site uses: "'+M+'", the iframe: "'+c.version+'".');if(!e.isOriginEqual(A,a.href)||!e.isOriginEqual(te,a.href))throw new Error("Can't connect to different domain from within an iframe. ("+a.href+", "+A+", "+te+")");s=new r(new w[F](A,te));break;case"m":s._send(_.data);break;case"c":s&&s._close(),s=null;break}}};t.attachEvent("message",y),o.postMessage("s")}},wr}var qs=Br,Js=k,ho=He,Vs=Es,gt=oe,Gs=ke,Ys=ws,zs=ar,Ks=ot,Qs=_s,_r=gr,po=Gr,It=Jn,Zs=Ss,vo=Os,ea=Hs,U=function(){};process.env.NODE_ENV!=="production"&&(U=D()("sockjs-client:main"));var mo;function j(e,t,r){if(!(this instanceof j))return new j(e,t,r);if(arguments.length<1)throw new TypeError("Failed to construct 'SockJS: 1 argument required, but only 0 present");po.call(this),this.readyState=j.CONNECTING,this.extensions="",this.protocol="",r=r||{},r.protocols_whitelist&&Qs.warn("'protocols_whitelist' is DEPRECATED. Use 'transports' instead."),this._transportsWhitelist=r.transports,this._transportOptions=r.transportOptions||{},this._timeout=r.timeout||0;var n=r.sessionId||8;if(typeof n=="function")this._generateSessionId=n;else if(typeof n=="number")this._generateSessionId=function(){return ho.string(n)};else throw new TypeError("If sessionId is used in the options, it needs to be a number or a function.");this._server=r.server||ho.numberString(1e3);var o=new qs(e);if(!o.host||!o.protocol)throw new SyntaxError("The URL '"+e+"' is invalid");if(o.hash)throw new SyntaxError("The URL must not contain a fragment");if(o.protocol!=="http:"&&o.protocol!=="https:")throw new SyntaxError("The URL's scheme must be either 'http:' or 'https:'. '"+o.protocol+"' is not allowed.");var a=o.protocol==="https:";if(It.protocol==="https:"&&!a&&!gt.isLoopbackAddr(o.hostname))throw new Error("SecurityError: An insecure SockJS connection may not be initiated from a page loaded over HTTPS");t?Array.isArray(t)||(t=[t]):t=[];var u=t.sort();u.forEach(function(f,w){if(!f)throw new SyntaxError("The protocols entry '"+f+"' is invalid.");if(w<u.length-1&&f===u[w+1])throw new SyntaxError("The protocols entry '"+f+"' is duplicated.")});var c=gt.getOrigin(It.href);this._origin=c?c.toLowerCase():null,o.set("pathname",o.pathname.replace(/\/+$/,"")),this.url=o.href,U("using url",this.url),this._urlInfo={nullOrigin:!Ks.hasDomain(),sameOrigin:gt.isOriginEqual(this.url,It.href),sameScheme:gt.isSchemeEqual(this.url,It.href)},this._ir=new ea(this.url,this._urlInfo),this._ir.once("finish",this._receiveInfo.bind(this))}Js(j,po);function bo(e){return e===1e3||e>=3e3&&e<=4999}j.prototype.close=function(e,t){if(e&&!bo(e))throw new Error("InvalidAccessError: Invalid code");if(t&&t.length>123)throw new SyntaxError("reason argument has an invalid length");if(!(this.readyState===j.CLOSING||this.readyState===j.CLOSED)){var r=!0;this._close(e||1e3,t||"Normal closure",r)}},j.prototype.send=function(e){if(typeof e!="string"&&(e=""+e),this.readyState===j.CONNECTING)throw new Error("InvalidStateError: The connection has not been established yet");this.readyState===j.OPEN&&this._transport.send(Vs.quote(e))},j.version=wn(),j.CONNECTING=0,j.OPEN=1,j.CLOSING=2,j.CLOSED=3,j.prototype._receiveInfo=function(e,t){if(U("_receiveInfo",t),this._ir=null,!e){this._close(1002,"Cannot connect to server");return}this._rto=this.countRTO(t),this._transUrl=e.base_url?e.base_url:this.url,e=zs.extend(e,this._urlInfo),U("info",e);var r=mo.filterToEnabled(this._transportsWhitelist,e);this._transports=r.main,U(this._transports.length+" enabled transports"),this._connect()},j.prototype._connect=function(){for(var e=this._transports.shift();e;e=this._transports.shift()){if(U("attempt",e.transportName),e.needBody&&(!v.document.body||typeof v.document.readyState<"u"&&v.document.readyState!=="complete"&&v.document.readyState!=="interactive")){U("waiting for body"),this._transports.unshift(e),Gs.attachEvent("load",this._connect.bind(this));return}var t=Math.max(this._timeout,this._rto*e.roundTrips||5e3);this._transportTimeoutId=setTimeout(this._transportTimeout.bind(this),t),U("using timeout",t);var r=gt.addPath(this._transUrl,"/"+this._server+"/"+this._generateSessionId()),n=this._transportOptions[e.transportName];U("transport url",r);var o=new e(r,this._transUrl,n);o.on("message",this._transportMessage.bind(this)),o.once("close",this._transportClose.bind(this)),o.transportName=e.transportName,this._transport=o;return}this._close(2e3,"All transports failed",!1)},j.prototype._transportTimeout=function(){U("_transportTimeout"),this.readyState===j.CONNECTING&&(this._transport&&this._transport.close(),this._transportClose(2007,"Transport timed out"))},j.prototype._transportMessage=function(e){U("_transportMessage",e);var t=this,r=e.slice(0,1),n=e.slice(1),o;switch(r){case"o":this._open();return;case"h":this.dispatchEvent(new _r("heartbeat")),U("heartbeat",this.transport);return}if(n)try{o=JSON.parse(n)}catch{U("bad json",n)}if(typeof o>"u"){U("empty payload",n);return}switch(r){case"a":Array.isArray(o)&&o.forEach(function(a){U("message",t.transport,a),t.dispatchEvent(new vo(a))});break;case"m":U("message",this.transport,o),this.dispatchEvent(new vo(o));break;case"c":Array.isArray(o)&&o.length===2&&this._close(o[0],o[1],!0);break}},j.prototype._transportClose=function(e,t){if(U("_transportClose",this.transport,e,t),this._transport&&(this._transport.removeAllListeners(),this._transport=null,this.transport=null),!bo(e)&&e!==2e3&&this.readyState===j.CONNECTING){this._connect();return}this._close(e,t)},j.prototype._open=function(){U("_open",this._transport&&this._transport.transportName,this.readyState),this.readyState===j.CONNECTING?(this._transportTimeoutId&&(clearTimeout(this._transportTimeoutId),this._transportTimeoutId=null),this.readyState=j.OPEN,this.transport=this._transport.transportName,this.dispatchEvent(new _r("open")),U("connected",this.transport)):this._close(1006,"Server lost session")},j.prototype._close=function(e,t,r){U("_close",this.transport,e,t,r,this.readyState);var n=!1;if(this._ir&&(n=!0,this._ir.close(),this._ir=null),this._transport&&(this._transport.close(),this._transport=null,this.transport=null),this.readyState===j.CLOSED)throw new Error("InvalidStateError: SockJS has already been closed");this.readyState=j.CLOSING,setTimeout((function(){this.readyState=j.CLOSED,n&&this.dispatchEvent(new _r("error"));var o=new Zs;o.wasClean=r||!1,o.code=e||1e3,o.reason=t,this.dispatchEvent(o),this.onmessage=this.onclose=this.onerror=null,U("disconnected")}).bind(this),0)},j.prototype.countRTO=function(e){return e>100?4*e:300+e};var ta=function(e){return mo=Ys(e),Xs()(j,e),j},ra=cs,na=ta(ra);"_sockjs_onload"in v&&setTimeout(v._sockjs_onload,1);const oa=jr(na);class ia{constructor(t,r){L(this,"socket");L(this,"createSocket",async(t,r)=>{const n=`${t}/api/events`,o=await $o(`${n}/request`);this.socket=new oa(n),this.socket.onerror=this.handleError,this.socket.onclose=this.handleClose,this.socket.onopen=()=>this.handleOpen(o.token,r)});L(this,"handleError",t=>{var r;t.eventPhase===EventSource.CLOSED?(r=this.socket)==null||r.close():console.error("Oops, Something went wrong with the co")});L(this,"handleClose",t=>{t.code===1e3||t.code===3e3||console.log("Socket connection closed unexpectedly")});L(this,"handleOpen",(t,r)=>{if(!this.socket)throw Error("Socket was not created");this.socket.send(t),r(this.socket)});L(this,"closeConnection",()=>{var t;(t=this.socket)==null||t.close(1e3,"client")});this.createSocket(t,r)}}class sa{constructor(t){L(this,"socket");L(this,"listeners",{});L(this,"cachedStates",{});L(this,"dispatchFeed",(t,r)=>{if(this.listeners[t]===void 0){console.warn("Feed update was recieved but no feed listener was set up",{feed:t,state:r});return}this.cachedStates[t]=r,this.listeners[t].forEach(n=>n(r))});L(this,"handleMessage",t=>{const r=JSON.parse(t.data);r.feed&&this.dispatchFeed(r.feed,r.state)});L(this,"setupListener",(t,r)=>{this.listeners[t]||(this.listeners[t]=new Set,this.socket.send(JSON.stringify({event:"feed-subscribe",message:{feed:t}}))),this.listeners[t].add(r)});L(this,"serveCache",(t,r)=>{const n=this.cachedStates[t];n!==void 0&&r(n)});L(this,"unsubscribe",(t,r)=>()=>{this.listeners[t].delete(r),this.listeners[t].size===0&&(delete this.listeners[t],this.socket.send(JSON.stringify({event:"feed-unsubscribe",message:{feed:t}})))});L(this,"subscribe",(t,r)=>(this.setupListener(t,r),this.serveCache(t,r),this.unsubscribe(t,r)));this.socket=t,this.socket.addEventListener("message",this.handleMessage)}}class aa{constructor(t){L(this,"listeners",{});L(this,"dispatchEvent",(t,r)=>{this.listeners[t]!==void 0?this.listeners[t].forEach(n=>n(r)):console.debug("Push event was recieved but not caught",{event:t,data:r})});L(this,"setupListener",(t,r)=>{this.listeners[t]||(this.listeners[t]=new Set),this.listeners[t].add(r)});L(this,"handleMessage",t=>{const r=JSON.parse(t.data);this.dispatchEvent(r.event,r.message)});L(this,"unsubscribe",(t,r)=>()=>{this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]});L(this,"subscribe",(t,r)=>(this.setupListener(t,r),this.unsubscribe(t,r)));t.addEventListener("message",this.handleMessage),this.handleMessage=this.handleMessage.bind(this),this.subscribe=this.subscribe.bind(this)}}const go=$.createContext({});function ua({children:e,socket:t}){const r=$.useRef(new aa(t));return Ze.jsx(go.Provider,{value:r.current.subscribe,children:e})}function ca(){return $.useContext(go)}const la=()=>(console.warn("FeedSubscribe used outside of its Provider"),()=>{console.warn("Unsubscribe called outside of FeedSubscribe Provider")}),yo=$.createContext(la);function fa({children:e,socket:t}){const r=$.useRef(new sa(t));return Ze.jsx(yo.Provider,{value:r.current.subscribe,children:e})}function ha(){return $.useContext(yo)}function da({serverUrl:e,children:t}){const[r,n]=$.useState();return $.useEffect(()=>new ia(e,a=>{n(a)}).closeConnection,[e]),r?Ze.jsx(fa,{socket:r,children:Ze.jsx(ua,{socket:r,children:t})}):Ze.jsx("div",{children:"Setting up connection..."})}function pa(e){const t=ha(),[r,n]=$.useState({loading:!0});return $.useEffect(()=>{!r.loading&&!r.data&&console.error(`Data should never be falsy when loading is false. This is most likely due to a backend error, take a look at the following feed: ${e}`)},[r]),$.useEffect(()=>t(e,a=>{n({data:a,loading:!1})}),[e,t]),r}function va(e,t){const r=ca();$.useEffect(()=>r(e,t),[t,e,r])}G.ServerSubscriptionProvider=da,G.useEvent=va,G.useFeed=pa,Object.defineProperty(G,Symbol.toStringTag,{value:"Module"})});
